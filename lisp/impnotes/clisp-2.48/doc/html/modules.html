<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>32.2. External Modules</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@lists.sourceforge.net" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot_8465" /><link rel="home" href="index.html" title="Implementation Notes for GNU CLISP" /><link rel="up" href="ext-platform.html" title="Chapter 32. Platform Specific Extensions" /><link rel="prev" href="screen.html" title="32.1. Random Screen Access" /><link rel="next" href="dffi.html" title="32.3. The Foreign Function Call Facility" /><link rel="copyright" href="legalese.html" title="Legal Status of the CLISP Implementation Notes" /><meta name="date" content="'generated: 2009-07-28 12:48:49-04:00'" /><link rel="author" title="Authors" href="index.html#authors" /><link rel="contents" title="Table of Contents" href="index.html" /><link rel="glossary" href="glossary.html" /><link rel="help" href="faq.html#faq-help" title="How do I ask for help?" /><link rel="home" title="Home" href="http://clisp.cons.org" /><link rel="index" href="idx.html" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">32.2. External Modules</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="screen.html">Prev</a> </td><th width="60%" align="center">Chapter 32. Platform Specific Extensions</th><td width="20%" align="right"> <a accesskey="n" href="dffi.html">Next</a></td></tr></table><hr /></div><div class="section" title="32.2. External Modules"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="modules"></a>32.2. External Modules</h2></div><div><h3 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> platforms only.</span></span></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="modules.html#mod-overview">32.2.1. Overview</a></span></dt><dt><span class="section"><a href="modules.html#modinit">32.2.2. Module initialization</a></span></dt><dt><span class="section"><a href="modules.html#modfini">32.2.3. Module finalization</a></span></dt><dt><span class="section"><a href="modules.html#modinfo">32.2.4. Function <code class="function">EXT:MODULE-INFO</code></a></span></dt><dt><span class="section"><a href="modules.html#mod-dynload">32.2.5. Function <code class="function">SYS::DYNLOAD-MODULES</code></a></span></dt><dt><span class="section"><a href="modules.html#mod-set-example">32.2.6. Example</a></span></dt><dt><span class="section"><a href="modules.html#module-tools">32.2.7. Module tools</a></span></dt><dd><dl><dt><span class="section"><a href="modules.html#modprep">32.2.7.1. Modprep</a></span></dt><dt><span class="section"><a href="modules.html#clisp-h">32.2.7.2. clisp.h</a></span></dt><dt><span class="section"><a href="modules.html#exporting">32.2.7.3. Exporting</a></span></dt></dl></dd><dt><span class="section"><a href="modules.html#mod-ffi-vs-c">32.2.8. Trade-offs: <strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong> vs. <span class="command"><strong>C</strong></span>   modules</a></span></dt><dt><span class="section"><a href="modules.html#included-modules">32.2.9. Modules included in the source distribution</a></span></dt><dd><dl><dt><span class="section"><a href="modules.html#base-modules">32.2.9.1. Base Modules</a></span></dt><dt><span class="section"><a href="modules.html#incmod-db">32.2.9.2. Database, Directory et al</a></span></dt><dt><span class="section"><a href="modules.html#incmod-kdml">32.2.9.3. Mathematics, Data Mining et al</a></span></dt><dt><span class="section"><a href="modules.html#incmod-match">32.2.9.4. Matching, File Processing et al</a></span></dt><dt><span class="section"><a href="modules.html#incmod-net">32.2.9.5. Communication, Networking</a></span></dt><dt><span class="section"><a href="modules.html#incmod-gui">32.2.9.6. Graphics</a></span></dt><dt><span class="section"><a href="modules.html#incmod-bind">32.2.9.7. Bindings</a></span></dt><dt><span class="section"><a href="modules.html#incmod-toys">32.2.9.8. Toys and Games</a></span></dt></dl></dd></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>32.1. <a href="modules.html#mod-set-ex-bindings">Create a module set with GNU libc bindings</a></dt></dl></div><div class="note" title="Modules on Win32" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="mod-win32"></a>Modules on <span class="platform">Win32</span></h3><p>Everything described in the section will work verbatim on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>
  when using <a class="ulink" href="http://cygwin.com/" target="_top"><span class="platform">Cygwin</span></a> or <a class="ulink" href="http://www.mingw.org/" target="_top"><span class="platform">MinGW</span></a>, <span class="emphasis"><em>except</em></span> for one
  thing - you will need to replace the <code class="filename">run</code>
  extension in <code class="filename">lisp.run</code> with the <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> executable
  extension <code class="filename">exe</code>.</p><p>For historical reasons, all examples appear to assume <a class="ulink" href="http://www.unix.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and
  use the <code class="filename">run</code> file type (<span class="quote">“<span class="quote">extension</span>”</span>)
  for the <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> <a href="clisp.html#runtime" class="olink">runtime</a>.
  This does <span class="strong"><strong>not</strong></span> mean that they will not work on <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a>.</p></div><div class="section" title="32.2.1. Overview"><div class="titlepage"><div><div><h3 class="title"><a id="mod-overview"></a>32.2.1. Overview</h3></div></div></div><p><span class="emphasis"><em>External modules</em></span> are a mechanism to add
 extensions (written in <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>, for example) to <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>.
 Extending <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> using an external module requires creating a <a href="modules.html#modset" class="olink">module set</a>
 and adding it to an existing <a href="modules.html#linkset" class="olink">linking set</a> using <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> to prodice a
 new <a href="modules.html#linkset" class="olink">linking set</a> which contains the extension. </p><div class="simplesect" title="Module Set"><div class="titlepage"><div><div><h4 class="title"><a id="modset"></a>Module Set</h4></div></div></div><p>A <strong class="first"><em class="firstterm">module<a id="module" class="indexterm"></a></em></strong> is a piece of code
 (<a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> or Lisp) which defines extra (non-core) Lisp objects, symbols
 and functions. Together with <a href="modules.html#modset" class="olink"><span class="command"><strong>link.sh</strong></span></a>, which describes how to add the
 module to an existing <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>, it comprises a <a href="modules.html#modset" class="olink">module set</a>.</p><p>More formally,
 <strong class="first"><em class="firstterm"><a href="modules.html#modset" class="olink">module set</a><a id="modseti" class="indexterm"></a></em></strong>
 is a directory containing:
</p><div class="variablelist"><dl><dt><span class="term"><a href="modules.html#modset" class="olink"><span class="command"><strong>link.sh</strong></span></a></span></dt><dd>some <a class="unix" href="http://www.opengroup.org/susv3/utilities/sh.html"><span class="command"><strong>/bin/sh</strong></span></a> commands, which prepare the directory
    for linking, and set some <a class="unix" href="http://www.opengroup.org/susv3/basedefs/xbd_chap08.html">environment variable</a>s, see <a class="xref" href="modules.html#mod-vars" title="Module set variables">the section called “Module set variables”</a>
 </dd><dt><span class="term">all other files that define the module functionality</span></dt><dd>needed by <a href="modules.html#modset" class="olink"><span class="command"><strong>link.sh</strong></span></a></dd></dl></div><p>In <a href="modules.html#modset" class="olink"><span class="command"><strong>link.sh</strong></span></a> the <a href="modules.html#modset" class="olink">module set</a> directory is referred to
 as <code class="varname">$modulename/</code>.</p><p>A module <strong class="first"><em class="firstterm">name<a id="module-name" class="indexterm"></a></em></strong>
 must consist of the characters <code class="filename">A</code>-<code class="filename">Z</code>,
 <code class="filename">a</code>-<code class="filename">z</code>, <code class="filename">_</code>,
 <code class="filename">0</code>-<code class="filename">9</code>.</p><p>The module name <span class="quote">“<span class="quote">clisp</span>”</span> is reserved.</p></div><div class="simplesect" title="Linking Set"><div class="titlepage"><div><div><h4 class="title"><a id="linkset"></a>Linking Set</h4></div></div></div><p>A <strong class="first"><em class="firstterm"><a href="modules.html#linkset" class="olink">linking set</a><a id="linkseti" class="indexterm"></a></em></strong>
 is a collection of files (<a href="clisp.html#runtime" class="olink">runtime</a>, <a href="image.html" class="olink">memory image</a> &amp;c) which allows
 performing two major tasks:
 </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Running <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>: to run a <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>
    contained in some <a href="modules.html#linkset" class="olink">linking set</a> <em class="replaceable"><code>directory</code></em>, call</p><pre class="screen">
<strong><code class="prompt">$</code></strong> <em class="replaceable"><code>directory</code></em>/lisp.run <code class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></code> <em class="replaceable"><code>directory</code></em>/lispinit.mem</pre><p>
 or </p><pre class="screen"><strong><code class="prompt">$</code></strong> clisp <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> <em class="replaceable"><code>directory</code></em></pre><p>
 (recommended, since it also passes
 <code class="option"><a href="clisp.html#opt-libdir" class="olink">-B</a></code>
 to the <a href="clisp.html#runtime" class="olink">runtime</a>).</p></li><li class="listitem">Adding a <a href="modules.html#modset" class="olink">module set</a> to create a new <a href="modules.html#linkset" class="olink">linking set</a> which
    will contain the module functionality.</li></ol></div><p>
 The <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> build directory contains three <a href="modules.html#linkset" class="olink">linking set</a>s in
 directories <span class="command"><strong>boot</strong></span>, <a href="modules.html#base-modules" class="olink"><span class="command"><strong>base</strong></span></a>, and <a href="modules.html#base-modules" class="olink"><span class="command"><strong>full</strong></span></a>, and a <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>
 installation normally contains two <a href="modules.html#linkset" class="olink">linking set</a>s: <a href="modules.html#base-modules" class="olink"><span class="command"><strong>base</strong></span></a>, and <a href="modules.html#base-modules" class="olink"><span class="command"><strong>full</strong></span></a></p><p>More formally, a <a href="modules.html#linkset" class="olink">linking set</a> is a directory containing at least
  these files:</p><div class="variablelist"><dl><dt><span class="term"><code class="filename">lisp.run</code></span></dt><dd>the executable <a href="clisp.html#runtime" class="olink">runtime</a></dd><dt><span class="term"><a class="link" href="image.html" title="31.2. Saving an Image"><code class="filename">lispinit.mem</code></a></span></dt><dd>the <a href="image.html" class="olink">memory image</a></dd><dt><span class="term"><code class="filename">modules.h</code></span></dt><dd>the list of modules contained in this <a href="modules.html#linkset" class="olink">linking set</a>
</dd><dt><span class="term"><code class="filename">modules.o</code></span></dt><dd>the compiled list of modules contained in this <a href="modules.html#linkset" class="olink">linking set</a>
</dd><dt><span class="term"><code class="filename">makevars</code></span></dt><dd><p>some <a class="unix" href="http://www.opengroup.org/susv3/utilities/sh.html"><span class="command"><strong>/bin/sh</strong></span></a> commands, setting the variables
   </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term"><code class="envar">CC</code></span></p></td><td>the <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> compiler
    </td></tr><tr><td><p><span class="term"><code class="envar">CPPFLAGS</code></span></p></td><td>flags for the <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> compiler, when preprocessing
       or compiling</td></tr><tr><td><p><span class="term"><code class="envar">CFLAGS</code></span></p></td><td>flags for the <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> compiler, when compiling or
       linking</td></tr><tr><td><p><span class="term"><code class="envar">CLFLAGS</code></span></p></td><td>flags for the <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> compiler, when linking
    </td></tr><tr><td><p><span class="term"><code class="envar">LIBS</code></span></p></td><td>libraries to use when linking (either present in
       the <a href="modules.html#linkset" class="olink">linking set</a> directory, or system-wide)
    </td></tr><tr><td><p><span class="term"><code class="envar">X_LIBS</code></span></p></td><td>additional <a class="ulink" href="http://www.x.org/" target="_top">X Window System</a> libraries to use
    </td></tr><tr><td><p><span class="term"><code class="envar">RANLIB</code></span></p></td><td>the ranlib command
    </td></tr><tr><td><p><span class="term"><code class="envar">FILES</code></span></p></td><td>the list of files needed when linking
    </td></tr></tbody></table></div></dd><dt><span class="term">all the <code class="envar">FILES</code></span></dt><dd>listed in <code class="filename">makevars</code>
</dd></dl></div></div><div class="simplesect" title="Operating on module sets and linking sets"><div class="titlepage"><div><div><h4 class="title"><a id="clisp-link"></a>Operating on <a href="modules.html#modset" class="olink">module set</a>s and <a href="modules.html#linkset" class="olink">linking set</a>s</h4></div></div></div><p>Adding one or several <a href="modules.html#modset" class="olink">module set</a>s to a <a href="modules.html#linkset" class="olink">linking set</a>s produces a new
 <a href="modules.html#linkset" class="olink">linking set</a> which contains the functionality of those modules in addition
 to all the functionality present in the original <a href="modules.html#linkset" class="olink">linking set</a>.
 This is done by the <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> shell script, installed in <a href="clisp.html#opt-libdir" class="olink"><code class="varname">CUSTOM:*LIB-DIRECTORY*</code></a>,
 so that you can invoke it with
 </p><pre class="screen"><strong><code class="prompt">$</code></strong> `<span class="command"><strong>clisp</strong></span> <code class="option"><a href="clisp.html#opt-printlibdir" class="olink">-b</a></code>`/<a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a></pre><div class="variablelist" title="clisp-link commands"><p class="title"><b><a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> commands</b></p><dl><dt><span class="term">create</span></dt><dd><p>The command
   </p><pre class="screen"><strong><code class="prompt">$</code></strong> <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> create <em class="replaceable"><code>module</code></em> <em class="replaceable"><code>file</code></em> ...</pre><p>
   creates a <a href="modules.html#modset" class="olink">module set</a> in <em class="replaceable"><code>module</code></em> directory which refers
   (via symbolic links) to files <em class="replaceable"><code>file</code></em>...
   The files are expected to be modules of their own.
</p></dd><dt><span class="term">add</span></dt><dd><p>The command
   </p><pre class="screen"><strong><code class="prompt">$</code></strong> <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> add <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>destination</code></em> <em class="replaceable"><code>module</code></em> ...</pre><p>
   combines the <a href="modules.html#linkset" class="olink">linking set</a> in directory <em class="replaceable"><code>source</code></em> and the <a class="link" href="modules.html" title="32.2. External Modules">module</a>s in
   directories <em class="replaceable"><code>module</code></em>... to a new <a href="modules.html#linkset" class="olink">linking set</a>, in the directory <em class="replaceable"><code>destination</code></em>
   which is newly created.</p></dd><dt><span class="term">run</span></dt><dd><p>The command
   </p><pre class="screen"><strong><code class="prompt">$</code></strong> <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> run <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>module</code></em> ...</pre><p>
   runs the <a href="modules.html#linkset" class="olink">linking set</a> in directory <em class="replaceable"><code>source</code></em>, with the <a class="link" href="modules.html" title="32.2. External Modules">module</a>s
   in directories <em class="replaceable"><code>module</code></em>...
   If <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> has been built with the configuration option <code class="option"><a class="link" href="modules.html#mod-dynload" title="32.2.5. Function SYS::DYNLOAD-MODULES">--with-dynamic-modules</a></code>,
   the loading will be performed <a class="link" href="modules.html#mod-dynload" title="32.2.5. Function SYS::DYNLOAD-MODULES">dynamically</a>.
   Otherwise - this is much slower - a temporary <a href="modules.html#linkset" class="olink">linking set</a> will be created
   and deleted afterwards.</p></dd></dl></div><p title="Requirements"><a id="clisp-link-kit"></a><b>Requirements. </b><a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> needs a <span class="quote">“<span class="quote">link kit</span>”</span> directory containing:
 </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="filename">"modules.c"</code></li><li class="listitem"><a class="link" href="modules.html#clisp-h" title="32.2.7.2. clisp.h"><code class="filename">"clisp.h"</code></a></li></ul></div><p title="Requirements"> <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> expects to find these files in a
 subdirectory <code class="filename">linkkit/</code> of the current directory.
 or in its own installation directory (i.e., <a href="clisp.html#opt-libdir" class="olink"><code class="varname">CUSTOM:*LIB-DIRECTORY*</code></a>).
 This can be overridden by the <a class="unix" href="http://www.opengroup.org/susv3/basedefs/xbd_chap08.html">environment variable</a> <code class="envar">CLISP_LINKKIT</code>.
</p><p>See also <a class="xref" href="modules.html#mod-set-example" title="32.2.6. Example">Section 32.2.6, “Example”</a>.</p></div><div class="simplesect" title="Module set variables"><div class="titlepage"><div><div><h4 class="title"><a id="mod-vars"></a>Module set variables</h4></div></div></div><p>The following variables should be defined in <a href="modules.html#modset" class="olink"><span class="command"><strong>link.sh</strong></span></a>.</p><div class="variablelist"><dl><dt><span class="term"><code class="envar">NEW_FILES</code></span></dt><dd>the space-separated list of object files that
  belong to the <a href="modules.html#modset" class="olink">module set</a> and will belong to every new <a href="modules.html#linkset" class="olink">linking set</a> linked
  with this <a href="modules.html#modset" class="olink">module set</a>.</dd><dt><span class="term"><code class="envar">NEW_LIBS</code></span></dt><dd>the space-separated list of object files, libraries or
  <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> compiler switches that need to be passed to the <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>
  compiler when linking the <code class="filename">lisp.run</code> belonging to a new <a href="modules.html#linkset" class="olink">linking set</a>.
 </dd><dt><span class="term"><code class="envar">NEW_MODULES</code></span></dt><dd>the space-separated list of the module names
  belonging to the <a href="modules.html#modset" class="olink">module set</a>.  Normally, every <code class="filename">#P".c"</code> file in the
  <a href="modules.html#modset" class="olink">module set</a> defines a module of its own.  The module name is usually
  derived from the file name.</dd><dt><a id="mod-load"></a><span class="term"><a class="link" href="modules.html#mod-load"><code class="envar">TO_LOAD</code></a></span></dt><dd>the space-separated list of Lisp files to load
  before building the <a class="link" href="image.html" title="31.2. Saving an Image"><code class="filename">lispinit.mem</code></a> belonging to a new <a href="modules.html#linkset" class="olink">linking set</a>.
 </dd><dt><a id="mod-preload"></a><span class="term"><a class="link" href="modules.html#mod-preload"><code class="envar">TO_PRELOAD</code></a> (optional)</span></dt><dd><p class="simpara">the space-separated list of Lisp files to load
   into an intermediate <a class="link" href="image.html" title="31.2. Saving an Image"><code class="filename">lispinit.mem</code></a> file, before building the <a class="link" href="image.html" title="31.2. Saving an Image"><code class="filename">lispinit.mem</code></a>
   belonging to a new <a href="modules.html#linkset" class="olink">linking set</a>.
   This variable is usually used to <a class="link" href="pack-intro.html#make-pack" title="11.1.1. Function MAKE-PACKAGE">create</a>
   (or <a class="link" href="pack-lock.html" title="11.2. Constraints on the “COMMON-LISP” Package for Conforming Programs - package locking">unlock</a>) the Lisp <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>s which
   must be present when the new <code class="filename">#P".c"</code> files are initialized.
   E.g., the <a class="link" href="dffi.html#def-call-in"><code class="function">FFI:DEF-CALL-IN</code></a> functions must reside in already defined packages;
   see <a class="xref" href="dffi.html#ex-call-in" title="Example 32.7. Calling Lisp from C">Example 32.7, “Calling Lisp from <span class="command"><strong>C</strong></span>”</a>.  You can find a live example in
   <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/syscalls/preload.lisp"><code class="filename">modules/syscalls/preload.lisp</code></a>
   and <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/syscalls/link.sh.in"><code class="filename">modules/syscalls/link.sh.in</code></a>.
  </p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you are unlocking a package, you must also
    <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">DELETE</code></a> it from <a class="link" href="pack-lock.html" title="11.2. Constraints on the “COMMON-LISP” Package for Conforming Programs - package locking"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a> (see <a class="xref" href="image.html" title="31.2. Saving an Image">Section 31.2, “Saving an Image”</a>) here
    and re-add it to <a class="link" href="pack-lock.html" title="11.2. Constraints on the “COMMON-LISP” Package for Conforming Programs - package locking"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a> in one of the <a class="link" href="modules.html#mod-load"><code class="envar">TO_LOAD</code></a> files.
    See, e.g., <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/i18n/preload.lisp"><code class="filename">modules/i18n/preload.lisp</code></a>
    and <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/i18n/link.sh.in"><code class="filename">modules/i18n/link.sh.in</code></a>.
</p></div></dd></dl></div></div></div><div class="section" title="32.2.2. Module initialization"><div class="titlepage"><div><div><h3 class="title"><a id="modinit"></a>32.2.2. Module initialization</h3></div></div></div><p>Each module has two initialization functions:
 </p><div class="variablelist"><dl><dt><span class="term">void
    <code class="function">module__<em class="replaceable"><code>name</code></em>__init_function_1</code>
    (struct module_t* module)</span></dt><dd><p class="simpara">called only <span class="emphasis"><em>once</em></span> when <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>
  discovers while loading a <a href="image.html" class="olink">memory image</a> that there is a module present
  in the executable (<code class="filename">lisp.run</code>) which was not present at the time the
  image was saved.  It can be used to create Lisp objects,
  e.g. functions or keywords, and is indeed used for that purpose by
  <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a>.</p><p class="simpara">You do <span class="strong"><strong>not</strong></span> have to define this function yourself;
  <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a> and <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> will do that for you.</p><p class="simpara">If you use <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>, <code class="code">(<a class="link" href="dffi.html#c-lines"><code class="function">FFI:C-LINES</code></a> :init-once ...)</code>
  will add code to this function.</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>s must already exist and be unlocked,
   cf. <a class="link" href="modules.html#mod-preload"><code class="envar">TO_PRELOAD</code></a>.</p></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you are using <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a> <span class="strong"><strong>and</strong></span> defining your
   own <span class="quote">“<span class="quote">init-once</span>”</span> function, it must call the
   <code class="function">module__<em class="replaceable"><code>name</code></em>__init_function_1__modprep</code>
   function!</p></div></dd><dt><span class="term">void <code class="function">module__<em class="replaceable"><code>name</code></em>__init_function_2</code>
  (struct module_t* module)</span></dt><dd><p class="simpara">called <span class="emphasis"><em>every time</em></span> <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> starts.
  It can be used to bind names to foreign addresses, since the address
  will be different in each invocation of <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>, and is indeed used
  for that purpose by <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> (e.g., by <a class="link" href="dffi.html#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a>).
  It can also be used to set parameters of the libraries to which the
  module interfaces, e.g., the <span class="module"><a class="filename" href="pcre.html" title="33.14. Perl Compatible Regular Expressions"><code class="filename">pcre</code></a></span> module
  sets <code class="varname">pcre_malloc</code> and <code class="varname">pcre_free</code>.
 </p><p class="simpara">You do <span class="strong"><strong>not</strong></span> have to define this function yourself;
  <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a> and <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> will do that for you.</p><p class="simpara">If you use <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>, <code class="code">(<a class="link" href="dffi.html#c-lines"><code class="function">FFI:C-LINES</code></a> :init-always ...)</code>
  will add code to this function.</p></dd></dl></div><p>
<em class="replaceable"><code>name</code></em> is the <a class="link" href="modules.html#mod-overview" title="32.2.1. Overview">module name</a>.</p><p>See also <a class="xref" href="custom-init-fini.html" title="31.1. Customizing CLISP Process Initialization and Termination">Section 31.1, “Customizing <span class="command"><strong>CLISP</strong></span> Process   Initialization and Termination”</a>.</p></div><div class="section" title="32.2.3. Module finalization"><div class="titlepage"><div><div><h3 class="title"><a id="modfini"></a>32.2.3. Module finalization</h3></div></div></div><p>Each module has a finalization function
</p><div class="variablelist"><dl><dt><span class="term">void
   <code class="function">module__<em class="replaceable"><code>name</code></em>__fini_function</code>
   (struct module_t* module)</span></dt><dd><p class="simpara">called before exiting <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>.</p><p class="simpara">You do <span class="strong"><strong>not</strong></span> have to define this function yourself;
  <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a> and <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> will do that for you.</p><p class="simpara">If you use <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>, <code class="code">(<a class="link" href="dffi.html#c-lines"><code class="function">FFI:C-LINES</code></a> :fini ...)</code> will
  add code to this function.</p></dd></dl></div><p>
<em class="replaceable"><code>name</code></em> is the <a class="link" href="modules.html#mod-overview" title="32.2.1. Overview">module name</a>.</p><p>See also <a class="xref" href="custom-init-fini.html" title="31.1. Customizing CLISP Process Initialization and Termination">Section 31.1, “Customizing <span class="command"><strong>CLISP</strong></span> Process   Initialization and Termination”</a>.</p></div><div class="section" title="32.2.4. Function EXT:MODULE-INFO"><div class="titlepage"><div><div><h3 class="title"><a id="modinfo"></a>32.2.4. Function <a class="link" href="modules.html#modinfo" title="32.2.4. Function EXT:MODULE-INFO"><code class="function">EXT:MODULE-INFO</code></a></h3></div></div></div><p>Function <code class="code">(<a class="link" href="modules.html#modinfo" title="32.2.4. Function EXT:MODULE-INFO"><code class="function">EXT:MODULE-INFO</code></a> <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>name</code></em>
  <em class="replaceable"><code>verbose</code></em>)</code> allows one to inquire
 about what modules are available in the currently running image.
 When called without arguments, it returns the list of module names,
 starting with <span class="quote">“<span class="quote">clisp</span>”</span>.  When <em class="replaceable"><code>name</code></em> is supplied and
 names a module, 3 values are returned - <em class="replaceable"><code>name</code></em>,
 <em class="replaceable"><code>subr-count</code></em>,
 <em class="replaceable"><code>object-count</code></em>.
 When <em class="replaceable"><code>verbose</code></em> is non-<a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the full list of
 module lisp function names written in <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> (<span class="type">Subr</span>s) and
 the full list of internal lisp objects available in <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> code
 are additionally returned for the total of 5 values.</p><p>When <em class="replaceable"><code>name</code></em> is <code class="constant">:FFI</code>, returns the list of
 shared libraries opened using <code class="constant">:LIBRARY</code>.
 When <em class="replaceable"><code>verbose</code></em> is non-<a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return the
 <a class="" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/glo_a.html#association_list">association list</a> of DLL names and all foreign objects associated with it.</p></div><div class="section" title="32.2.5. Function SYS::DYNLOAD-MODULES"><div class="titlepage"><div><div><h3 class="title"><a id="mod-dynload"></a>32.2.5. Function <a class="link" href="modules.html#mod-dynload" title="32.2.5. Function SYS::DYNLOAD-MODULES"><code class="function">SYS::DYNLOAD-MODULES</code></a></h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only when compiled <span class="strong"><strong>with</strong></span> configure
  flag <code class="option"><a class="link" href="modules.html#mod-dynload" title="32.2.5. Function SYS::DYNLOAD-MODULES">--with-dynamic-modules</a></code>.</span></span></h4></div></div></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Dynamic loading does not work on all operating systems
  (<a class="unix" href="http://www.opengroup.org/susv3/functions/dlopen.html"><code class="function">dlopen</code></a> or equivalent is required).</p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><code class="option"><a class="link" href="modules.html#mod-dynload" title="32.2.5. Function SYS::DYNLOAD-MODULES">--with-dynamic-modules</a></code> precludes some optimizations which
  are enabled by default.</p></div><p>Function <code class="code">(<a class="link" href="modules.html#mod-dynload" title="32.2.5. Function SYS::DYNLOAD-MODULES"><code class="function">SYS::DYNLOAD-MODULES</code></a> <em class="replaceable"><code>filename</code></em> ({<em class="replaceable"><code>name</code></em>}+))</code>
 loads a shared object file or library containing a number of named
 external <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> modules.
 </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This facility <span class="emphasis"><em>cannot</em></span> be used to
   access arbitrary shared libraries.  To do that, use the <code class="constant">:LIBRARY</code>
   argument to <a class="link" href="dffi.html#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> and <a class="link" href="dffi.html#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a> instead.</p></div><p>
</p><p>External modules for <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> are shared objects
 (dynamic libraries) that contain the
 <code class="literal">module__<em class="replaceable"><code>name</code></em>__subr_tab</code> variable, among others.
 This serves to register external functions which operate on Lisp-level
 structures with <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>.</p><p>To use <a class="unix" href="http://www.opengroup.org/susv3/functions/dlopen.html"><code class="function">dlopen</code></a> with modules, you should add
 <code class="option">-fPIC</code> to the module's compilation options. Something like
 </p><pre class="screen"><strong><code class="prompt">$</code></strong> cc -shared -o <em class="replaceable"><code>name</code></em>.so <em class="replaceable"><code>name</code></em>.o</pre><p>
 may be needed to produce the shared object file.</p></div><div class="section" title="32.2.6. Example"><div class="titlepage"><div><div><h3 class="title"><a id="mod-set-example"></a>32.2.6. Example</h3></div></div></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>32.1. <a href="modules.html#mod-set-ex-bindings">Create a module set with GNU libc bindings</a></dt></dl></div><div class="example"><a id="mod-set-ex-bindings"></a><p class="title"><b>Example 32.1. Create a <a href="modules.html#modset" class="olink">module set</a> with <a class="ulink" href="http://www.gnu.org" target="_top">GNU</a> <a class="ulink" href="http://www.gnu.org/software/libc/" target="_top">libc</a> bindings</b></p><div class="example-contents"><p>To link in the <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> bindings for the <a class="ulink" href="http://www.gnu.org" target="_top">GNU</a>/<a class="ulink" href="http://www.linux.org/" target="_top"><span class="platform">Linux</span></a> operating
 system, the following steps are needed.  (Step 1 and step 2 need not be
 executed in this order.)</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Create a new module set"><p class="title"><b>Create a new <a href="modules.html#modset" class="olink">module set</a></b></p><pre class="screen"><strong><code class="prompt">$</code></strong> <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> create linux /<em class="replaceable"><code>pathname</code></em>/bindings/linux.c</pre></li><li class="step" title="Modify the newly created linux/link.sh"><p class="title"><b>Modify the newly created
  <code class="filename">linux/<a href="modules.html#modset" class="olink"><span class="command"><strong>link.sh</strong></span></a></code></b></p><ol type="a" class="substeps"><li class="step" title="add -lm to the libraries"><p class="title"><b>add <code class="option">-lm</code> to the libraries</b></p><p>replace </p><pre class="screen">NEW_LIBS="$file_list"</pre><p>
    with </p><pre class="screen">NEW_LIBS="$file_list -lm"</pre></li><li class="step" title="load linux.fas before saving the memory image"><p class="title"><b>load <code class="filename">linux.fas</code> before saving the
    <a href="image.html" class="olink">memory image</a></b></p><p>replace </p><pre class="screen">TO_LOAD=''</pre><p> with
    </p><pre class="screen">TO_LOAD='/<em class="replaceable"><code>pathname</code></em>/bindings/linux.fas'</pre></li></ol></li><li class="step" title="Compile linux.lisp, creating linux.c"><p class="title"><b>Compile <code class="filename">linux.lisp</code>, creating
  <code class="filename">linux.c</code></b></p><pre class="screen"><strong><code class="prompt">$</code></strong> clisp -c /<em class="replaceable"><code>pathname</code></em>/bindings/linux.lisp</pre></li><li class="step" title="Create a new linking set"><p class="title"><b>Create a new <a href="modules.html#linkset" class="olink">linking set</a></b></p><pre class="screen"><strong><code class="prompt">$</code></strong> <a class="link" href="modules.html#clisp-link" title="Operating on module sets and linking sets"><span class="command"><strong>clisp-link</strong></span></a> add linux base base+linux</pre></li><li class="step" title="Run and try it"><p class="title"><b>Run and try it</b></p><pre class="screen"><strong><code class="prompt">$</code></strong> base+linux/lisp.run -M base+linux/lispinit.mem -x '(linux:stat "/tmp")'</pre></li></ol></div></div></div><br class="example-break" /></div><div class="section" title="32.2.7. Module tools"><div class="titlepage"><div><div><h3 class="title"><a id="module-tools"></a>32.2.7. Module tools</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="modules.html#modprep">32.2.7.1. Modprep</a></span></dt><dt><span class="section"><a href="modules.html#clisp-h">32.2.7.2. clisp.h</a></span></dt><dt><span class="section"><a href="modules.html#exporting">32.2.7.3. Exporting</a></span></dt></dl></div><p>There are some tools to facilitate easy module writing.</p><div class="section" title="32.2.7.1. Modprep"><div class="titlepage"><div><div><h4 class="title"><a id="modprep"></a>32.2.7.1. Modprep</h4></div></div></div><p>If your module is written in <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>, you can pre-process your
 sources with <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a> in the <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> distribution and define lisp
 functions with the <code class="function">DEFUN</code> macro:
 </p><pre class="programlisting">
DEFUN(MY-PACKAGE:MY-FUNCTION-NAME, arg1 arg2 <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> FOO BAR) {
  if (!boundp(STACK_0)) STACK_0 = fixnum(0); /* BAR */
  if (!boundp(STACK_1)) STACK_1 = fixnum(1); /* FOO */
  pushSTACK(`MY-PACKAGE::SOME-SYMBOL`); /* create a symbol in the package */
  pushSTACK(`#(:THIS :IS :A :VECTOR)`); /* some vector, created once */
  pushSTACK(``MY-PACKAGE::MY-FUNCTION-NAME``); /* double `` means FUNCTION */
  VALUES1(listof(7)); /* cons up a new list and clean up the STACK */
}</pre><p>
Then <code class="code">(MY-PACKAGE:MY-FUNCTION-NAME 'A 12 :FOO T)</code> will
 return <span class="returnvalue">(A 12 T 0 MY-PACKAGE::SOME-SYMBOL #(:THIS
  :IS :A :VECTOR) #&lt;ADD-ON-SYSTEM-FUNCTION
  MY-PACKAGE:MY-FUNCTION-NAME&gt;)</span>
(assuming you <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a>ed <code class="literal">MY-FUNCTION-NAME</code> from
 <strong class="package"><span class="quote">“<span class="quote">MY-PACKAGE</span>”</span></strong>).</p><p>Note that the arguments are passed on the <a href="vm.html" class="olink"><code class="literal">STACK</code></a> (last argument
 being the top) which has to be cleaned up before exit.</p><p>Another useful macros are:
 </p><div class="variablelist"><dl><dt><span class="term"><code class="function">DEFVAR</code></span></dt><dd>create a GC-visible private object
  </dd><dt><span class="term"><code class="function">DEFFLAGSET</code></span></dt><dd>define a <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> function which will remove
     several flag arguments from the <a href="vm.html" class="olink"><code class="literal">STACK</code></a> and return the combined flag
     value</dd><dt><span class="term"><code class="function">DEFCHECKER</code></span></dt><dd>define a map from <a class="ulink" href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span class="command"><strong>cpp</strong></span></a> constants to lisp symbols and
     functions that map between them, checking that the argument is appropriate
  </dd></dl></div><p>See <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/syscalls/calls.c"><code class="filename">modules/syscalls/calls.c</code></a>
 and other included modules for more examples and file <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a> for full
 documentation.</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you manipulate Lisp objects, you need to watch out for
  <a class="link" href="gc-safety.html" title="35.5. The burden of garbage-collection upon the rest of CLISP">GC-safety</a>.</p></div></div><div class="section" title="32.2.7.2. clisp.h"><div class="titlepage"><div><div><h4 class="title"><a id="clisp-h"></a>32.2.7.2. clisp.h</h4></div></div></div><p>If your module is written in <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>, you will probably want
 to <code class="literal">#include "clisp.h"</code> to access <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> objects.
 You will certainly need to read <a class="link" href="modules.html#clisp-h" title="32.2.7.2. clisp.h"><code class="filename">"clisp.h"</code></a> and some code in
 <a class="link" href="modules.html#included-modules" title="32.2.9. Modules included in the source distribution">included modules</a>, but here are
 some important hints that you will need to keep in mind:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Lisp objects have type <a class="link" href="typecodes.html" title="35.3. Object Pointer Representations"><span class="type">object</span></a>.</li><li class="listitem">Variables of this type are invalidated by
   <a class="link" href="gc-safety.html" title="35.5. The burden of garbage-collection upon the rest of CLISP">lisp memory allocation</a>
   (<code class="function">allocate_*()</code> functions) - but <span class="strong"><strong>not</strong></span> <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>
   allocations (<a class="unix" href="http://www.opengroup.org/susv3/functions/malloc.html"><code class="function">malloc</code></a> et al) - and must be saved on the <a href="vm.html" class="olink"><code class="literal">STACK</code></a> using <a class="ulink" href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span class="command"><strong>cpp</strong></span></a>
   macros <code class="function">pushSTACK()</code>, <code class="function">popSTACK()</code>
   and <code class="function">skipSTACK()</code>.</li><li class="listitem">Access object slots using the
   appropriate <code class="function">TheFoo()</code> macro, e.g.,
   <code class="function">TheCons(my_cons)-&gt;Car</code>, but first check the
   type with <code class="function">consp()</code>.</li><li class="listitem">Arguments are passed on the <a href="vm.html" class="olink"><code class="literal">STACK</code></a>, as illustrated
   in the <a class="link" href="modules.html#modprep" title="32.2.7.1. Modprep">above example</a>.</li><li class="listitem"><p class="simpara">Wrap your system calls in
   <code class="literal">begin_system_call()</code>/<code class="literal">end_system_call()</code>
   pairs.  These macros, defined in <a class="link" href="modules.html#clisp-h" title="32.2.7.2. clisp.h"><code class="filename">"clisp.h"</code></a>, save and restore
   registers used by <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> which could be clobbered by a system call.
  </p><p class="simpara">If the system call could block (e.g., <a class="unix" href="http://www.opengroup.org/susv3/functions/read.html"><code class="function">read</code></a>)
   you need to use <code class="literal">begin_blocking_system_call()</code> and
   <code class="literal">end_blocking_system_call()</code> instead. This will
   allow other threads to run while yours is inside the system call.
   This means that <a href="gc.html" class="olink">garbage-collect</a>ion could happen while you are inside this system
   call and, thus, that all objects of type <a class="link" href="typecodes.html" title="35.3. Object Pointer Representations"><span class="type">object</span></a> are
   invalidated by the call. See also <a class="xref" href="gc-safety.html" title="35.5. The burden of garbage-collection upon the rest of CLISP">Section 35.5, “The burden of garbage-collection upon the rest of <span class="command"><strong>CLISP</strong></span>”</a> and
   <a class="xref" href="gc-mt.html" title="35.7. Garbage Collection and Multithreading">Section 35.7, “Garbage Collection and Multithreading”</a>.</p></li></ul></div><p>
</p></div><div class="section" title="32.2.7.3. Exporting"><div class="titlepage"><div><div><h4 class="title"><a id="exporting"></a>32.2.7.3. Exporting</h4></div></div></div><p>If your module uses <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> to interface to a <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> library,
 you might want to make your module package
 <a class="link" href="pack-intro.html#make-pack" title="11.1.1. Function MAKE-PACKAGE">case-sensitive</a> and use
 <a class="link" href="src-files.html#exporting-lisp"><code class="filename">exporting.lisp</code></a> in the <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> distribution to make <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> forms
 and <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a>, <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a> at al export the symbols they define.
 See <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/netica/"><code class="filename">modules/netica/</code></a>,
 <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/matlab/"><code class="filename">modules/matlab/</code></a> and
 <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/bindings/"><code class="filename">modules/bindings/</code></a> for examples.</p></div></div><div class="section" title="32.2.8. Trade-offs: “FFI” vs. C modules"><div class="titlepage"><div><div><h3 class="title"><a id="mod-ffi-vs-c"></a>32.2.8. Trade-offs: <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> vs. <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>
  modules</h3></div></div></div><p>When deciding how to write a module: whether to use <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>  or
 to stick with <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> and <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a>, one has to take into account
 several issues: </p><div class="variablelist"><dl><dt><span class="term">Speed: <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> wins</span></dt><dd><p><a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> has a noticeable overhead:
   compare <code class="function">RAWSOCK:HTONS</code> (defined
   in <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/rawsock/rawsock.c"><code class="filename">modules/rawsock/rawsock.c</code></a>)
   with </p><pre class="programlisting">
(<a class="link" href="dffi.html#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> htons (:name "htons") (<code class="constant">:LIBRARY</code> :default)
  (<code class="constant">:ARGUMENTS</code> (s ffi:short)) (<code class="constant">:RETURN-TYPE</code> ffi:short) (<a class="link" href="dffi.html#c-flavor" title="32.3.4. The choice of the C flavor"><code class="constant">:LANGUAGE</code></a> :stdc))
</pre><p> and observe that <code class="function">RAWSOCK:HTONS</code> is
   almost 3 times as fast (this really does compare the <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>
   overhead to the normal lisp function call because
   <a class="unix" href="http://www.opengroup.org/susv3/functions/htons.html"><code class="function">htons</code></a> is computationally trivial).
   This difference will matter only if you call a simple function very
   many times, in which case it would make sense to put the loop itself
   into <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>.</p></dd><dt><span class="term">Portability: <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> wins</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> is <span class="strong"><strong>not</strong></span> as widely
     ported as <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>, so it is possible that you will face a platform
     where <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> runs but <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> is not present.</li><li class="listitem">It is much easier to handle portability in
     <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>: observe the alternative implementations
     of <a class="unix" href="http://www.opengroup.org/susv3/functions/htonl.html"><code class="function">htonl</code></a> et al in
     <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/rawsock/rawsock.c"><code class="filename">modules/rawsock/rawsock.c</code></a>.
   </li><li class="listitem">Certain <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> structures have different
     layout on different platforms, and functions may take 64-bit
     arguments on some platforms and 32-bit arguments on others; so the
     <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> code has to track those differences, while <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> will
     mostly take care of these things for you.</li></ol></div></dd><dt><span class="term">Code size: <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> wins</span></dt><dd>You need to type much fewer characters with <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>,
   and, if you use the <code class="constant">:LIBRARY</code> argument to <a class="link" href="dffi.html#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> and
   <a class="link" href="dffi.html#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a>, you do not need to leave your <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> session to try
   out your code.  This is a huge advantage for rapid prototyping.
</dd><dt><span class="term">UI: <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> wins</span></dt><dd>To produce a nice lispy UI (using <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> and
   <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>word arguments etc), you will need to write wrappers to your
   <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>s, while in <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> you can do that directly.
   The same goes for <span class="quote">“<span class="quote">polymorphism</span>”</span>: accepting different
   argument types (like, e.g., <a class="link" href="syscalls.html#resolve-host"><code class="function">POSIX:RESOLVE-HOST-IPADDR</code></a> does) would require a lisp
   wrapper for <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>s.
</dd><dt><span class="term">Learning curve: unclear</span></dt><dd><p class="simpara">If you are comfortable with <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>, you might
   find the <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> module facilities (e.g., <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a>) very
   easy to use.</p><p class="simpara"><a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>, on the other hand, is quite high-level,
   so, if you are more comfortable with high-level languages, you might
   find it easier to write <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> forms than <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> code.
</p></dd><dt><span class="term">Safety: unclear</span></dt><dd>One can get a segfault either way: if your
   <a class="link" href="dffi.html#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> form does not describe the <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> function's
   expectations with respect to the arguments and return values
   (including <a class="link" href="dffi.html#allocation" title="32.3.8. Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>), you will probably learn that the hard way.
   If the module is written in <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>, all the opportunities to shoot
   oneself in the foot (and other body parts) are wide open
   (although well known to most <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a> users).
   However, with <a class="ulink" href="http://c-faq.com/" target="_top"><span class="command"><strong>C</strong></span></a>, one has to watch
   for <a class="link" href="gc-safety.html" title="35.5. The burden of garbage-collection upon the rest of CLISP">GC-safety</a> too.
</dd></dl></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="mod-ffi-vs-c-granularity"></a>Note</h3><p>The granularity of the
  choice is <span class="emphasis"><em>per function</em></span>: the same module can use
  both <a class="link" href="src-preprocessing.html#modprep-file"><span class="command"><strong>modprep</strong></span></a> and <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a>.</p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="mod-ffi-vs-c-naming"></a>Note</h3><p>It is not a good idea to have
  both <code class="filename">foo.lisp</code> and <code class="filename">foo.c</code>
  files in a module, because if you ever add an <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> form to the
  former, <a href="compilefile.html" class="olink"><code class="function">COMPILE-FILE</code></a> will
  <a class="link" href="compilefile.html#c-file-overwrite" title="Warning">overwrite</a> the latter.</p></div></div><div class="section" title="32.2.9. Modules included in the source distribution"><div class="titlepage"><div><div><h3 class="title"><a id="included-modules"></a>32.2.9. Modules included in the source distribution</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="modules.html#base-modules">32.2.9.1. Base Modules</a></span></dt><dt><span class="section"><a href="modules.html#incmod-db">32.2.9.2. Database, Directory et al</a></span></dt><dt><span class="section"><a href="modules.html#incmod-kdml">32.2.9.3. Mathematics, Data Mining et al</a></span></dt><dt><span class="section"><a href="modules.html#incmod-match">32.2.9.4. Matching, File Processing et al</a></span></dt><dt><span class="section"><a href="modules.html#incmod-net">32.2.9.5. Communication, Networking</a></span></dt><dt><span class="section"><a href="modules.html#incmod-gui">32.2.9.6. Graphics</a></span></dt><dt><span class="section"><a href="modules.html#incmod-bind">32.2.9.7. Bindings</a></span></dt><dt><span class="section"><a href="modules.html#incmod-toys">32.2.9.8. Toys and Games</a></span></dt></dl></div><p>A few modules come with the <span class="emphasis"><em>source</em></span>
 distribution of <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> (but are not necessarily built in a
 particular <span class="emphasis"><em>binary</em></span> distribution).</p><p>To use modules, read <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/unix/INSTALL"><code class="filename">unix/INSTALL</code></a>
 and build <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> in a directory <code class="filename">build-dir</code> with,
 e.g.,</p><pre class="screen">
<strong><code class="prompt">$</code></strong> ./configure --with-module=pcre --with-module=clx/new-clx --cbc build-dir</pre><p> then run it with
</p><pre class="screen"><strong><code class="prompt">$</code></strong> ./build-dir/clisp <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> full</pre><p>
This will create a <a href="modules.html#base-modules" class="olink"><span class="command"><strong>base</strong></span></a> <a href="modules.html#linkset" class="olink">linking set</a> with modules
<span class="module"><a class="filename" href="i18n-mod.html" title="33.2. Internationalization of User Programs"><code class="filename">i18n</code></a></span>, <span class="module"><a class="filename" href="regexp-mod.html" title="33.3. POSIX Regular Expressions"><code class="filename">regexp</code></a></span> and <span class="module"><a class="filename" href="syscalls.html" title="33.1. System Calls"><code class="filename">syscalls</code></a></span> (and maybe <span class="module"><a class="filename" href="readline-mod.html" title="33.4. Advanced Readline and History Functionality"><code class="filename">readline</code></a></span>);
and a <a href="modules.html#base-modules" class="olink"><span class="command"><strong>full</strong></span></a> <a href="modules.html#linkset" class="olink">linking set</a> with modules <span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/clx/new-clx/"><code class="filename">clx/new-clx</code></a></span> and <span class="module"><a class="filename" href="pcre.html" title="33.14. Perl Compatible Regular Expressions"><code class="filename">pcre</code></a></span> in addition
to the 3 (or 4) <a href="modules.html#base-modules" class="olink"><span class="command"><strong>base</strong></span></a> modules.</p><p>Here we list the included modules by their general theme.
 See <a class="xref" href="ext-modules.html" title="Chapter 33. Extensions Implemented as Modules">Chapter 33, <i>Extensions Implemented as Modules</i></a> for individual module documentation.</p><div class="section" title="32.2.9.1. Base Modules"><div class="titlepage"><div><div><h4 class="title"><a id="base-modules"></a>32.2.9.1. Base Modules</h4></div></div></div><p>The default build process includes the following modules
  in <span class="emphasis"><em>both</em></span> <a href="modules.html#base-modules" class="olink"><span class="command"><strong>base</strong></span></a> <span class="strong"><strong>and</strong></span> <a href="modules.html#base-modules" class="olink"><span class="command"><strong>full</strong></span></a> <a href="modules.html#linkset" class="olink">linking set</a>s:
</p><div class="variablelist"><dl><dt><span class="term"><span class="module"><a class="filename" href="i18n-mod.html" title="33.2. Internationalization of User Programs"><code class="filename">i18n</code></a></span></span></dt><dd>Internationalization of User Programs.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="regexp-mod.html" title="33.3. POSIX Regular Expressions"><code class="filename">regexp</code></a></span></span></dt><dd>The <a class="ulink" href="http://www.opengroup.org/austin/papers/posix_faq.html" target="_top"><span class="platform">POSIX</span></a> <a class="ulink" href="regexp.html" target="_top">Regular
     Expressions</a> matching, compiling, executing.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="syscalls.html" title="33.1. System Calls"><code class="filename">syscalls</code></a></span></span></dt><dd>Use some system calls in a platform-independent way.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="readline-mod.html" title="33.4. Advanced Readline and History Functionality"><code class="filename">readline</code></a></span> (only when both <a class="ulink" href="http://www.gnu.org" target="_top">GNU</a> <a class="ulink" href="http://tiswww.case.edu/php/chet/readline/readline.html" target="_top">readline</a> and
    <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> are available)</span></dt><dd>When <a class="ulink" href="http://www.gnu.org" target="_top">GNU</a> <a class="ulink" href="http://tiswww.case.edu/php/chet/readline/readline.html" target="_top">readline</a> and <a class="link" href="dffi.html" title="32.3. The Foreign Function Call Facility"><strong class="package"><span class="quote">“<span class="quote">FFI</span>”</span></strong></a> are available, some
   advanced readline and history features are exported using this module.
 </dd></dl></div><p>The composition of the <a href="modules.html#base-modules" class="olink"><span class="command"><strong>full</strong></span></a> <a href="modules.html#linkset" class="olink">linking set</a> depends on the platform
  and on the vendor preferences.</p></div><div class="section" title="32.2.9.2. Database, Directory et al"><div class="titlepage"><div><div><h4 class="title"><a id="incmod-db"></a>32.2.9.2. Database, Directory et al</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="module"><a class="filename" href="gdbm.html" title="33.5. GDBM - The GNU database manager"><code class="filename">gdbm</code></a></span></span></dt><dd>Interface to <a class="ulink" href="http://www.gnu.org" target="_top">GNU</a> <a class="ulink" href="http://www.gnu.org/software/gdbm/" target="_top">DataBase Manager</a> by
    <span class="author"><span class="firstname">Masayuki</span> <span class="surname">Onjo</span></span>.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="berkeley-db.html" title="33.6. Berkeley DB access"><code class="filename">berkeley-db</code></a></span></span></dt><dd><a class="bdb" href="http://www.oracle.com/technology/documentation/berkeley-db/db/index.html">Berkeley DB</a>
    interface.</dd><dt><span class="term"><span class="module"><a class="filename" href="dir-key.html" title="33.7. Directory Access"><code class="filename">dirkey</code></a></span></span></dt><dd>Directory Access (LDAP, <a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a> registry etc).
 </dd><dt><span class="term"><span class="module"><a class="filename" href="postgresql.html" title="33.8. PostgreSQL Database Access"><code class="filename">postgresql</code></a></span></span></dt><dd>Access <a class="ulink" href="http://www.PostgreSQL.org/" target="_top">PostgreSQL</a> from <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>.
  </dd><dt><span class="term"><span class="module"><a class="filename" href="oracle.html" title="33.9. Oracle Interface"><code class="filename">oracle</code></a></span></span></dt><dd>Access <a class="ulink" href="http://www.oracle.com" target="_top">Oracle</a> RDBMS from <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>; by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.
 </dd></dl></div></div><div class="section" title="32.2.9.3. Mathematics, Data Mining et al"><div class="titlepage"><div><div><h4 class="title"><a id="incmod-kdml"></a>32.2.9.3. Mathematics, Data Mining et al</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="module"><a class="filename" href="libsvm.html" title="33.10. LibSVM Interface"><code class="filename">libsvm</code></a></span></span></dt><dd>Build
    <a class="ulink" href="http://www.support-vector-machines.org/" target="_top">Support
     Vector Machine</a> models using <a class="ulink" href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/" target="_top">LibSVM</a> inside <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="pari.html" title="33.11. Computer Algebra System PARI"><code class="filename">pari</code></a></span></span></dt><dd>Interface to the computer algebra system <a class="ulink" href="http://pari.math.u-bordeaux.fr/" target="_top">PARI</a>.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="matlab.html" title="33.12. Matlab Interface"><code class="filename">matlab</code></a></span></span></dt><dd>Do matrix computations via
    <a class="ulink" href="http://www.mathworks.com/products/matlab/" target="_top">MATLAB</a>.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="netica.html" title="33.13. Netica Interface"><code class="filename">netica</code></a></span></span></dt><dd>Work with Bayesian belief networks and influence
    diagrams using <a class="ulink" href="http://norsys.com/netica_c_api.htm" target="_top">Netica C API</a>.</dd></dl></div></div><div class="section" title="32.2.9.4. Matching, File Processing et al"><div class="titlepage"><div><div><h4 class="title"><a id="incmod-match"></a>32.2.9.4. Matching, File Processing et al</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="module"><a class="filename" href="pcre.html" title="33.14. Perl Compatible Regular Expressions"><code class="filename">pcre</code></a></span></span></dt><dd>The <a class="ulink" href="http://www.pcre.org/" target="_top">Perl Compatible Regular Expressions</a> matching, compiling, executing.
 </dd><dt><span class="term"><span class="module"><a class="filename" href="wildcard.html" title="33.15. The Wildcard Module"><code class="filename">wildcard</code></a></span></span></dt><dd>Shell (<a class="unix" href="http://www.opengroup.org/susv3/utilities/sh.html"><span class="command"><strong>/bin/sh</strong></span></a>) globbing (<a class="unix" href="http://www.opengroup.org/susv3/utilities/xcu_chap02.html#tag_02_13">Pathname Matching</a>).
 </dd><dt><span class="term"><span class="module"><a class="filename" href="zlib.html" title="33.16. Interface to zlib"><code class="filename">zlib</code></a></span></span></dt><dd>Compress <a class="ulink" href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>s using <a class="ulink" href="http://zlib.net" target="_top">ZLIB</a>.
 </dd></dl></div></div><div class="section" title="32.2.9.5. Communication, Networking"><div class="titlepage"><div><div><h4 class="title"><a id="incmod-net"></a>32.2.9.5. Communication, Networking</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="module"><a class="filename" href="rawsock.html" title="33.17. Raw Socket Access"><code class="filename">rawsock</code></a></span></span></dt><dd>Raw socket access.</dd><dt><span class="term"><span class="module"><a class="filename" href="dbus.html" title="33.19. Interface to D-Bus"><code class="filename">dbus</code></a></span></span></dt><dd>Interface to <a class="ulink" href="http://www.freedesktop.org/wiki/Software/dbus" target="_top">D-Bus</a>.
</dd><dt><span class="term"><span class="module"><a class="filename" href="fastcgi.html" title="33.18. The FastCGI Interface"><code class="filename">fastcgi</code></a></span></span></dt><dd>Access <a class="ulink" href="http://www.fastcgi.com" target="_top">FastCGI</a> from <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>;
    by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.</dd></dl></div></div><div class="section" title="32.2.9.6. Graphics"><div class="titlepage"><div><div><h4 class="title"><a id="incmod-gui"></a>32.2.9.6. Graphics</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><a class="ulink" href="http://www.cliki.net/CLX" target="_top"><span class="command"><strong>CLX</strong></span></a></span></dt><dd><p>Call
   <a class="ulink" href="http://www.x.org/docs/X11/xlib.pdf" target="_top">Xlib</a>
   functions from <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>.  Two implementations are supplied:
  </p><div class="variablelist"><dl><dt><span class="term"><span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/clx/mit-clx/"><code class="filename">clx/mit-clx</code></a></span>, from MIT
   <a class="ulink" href="ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z" target="_top">ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z</a></span></dt><dd>the standard implementation
  </dd><dt><span class="term"><span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/clx/new-clx/"><code class="filename">clx/new-clx</code></a></span>, by <span class="author"><span class="firstname">Gilbert</span> <span class="surname">Baumann</span></span></span></dt><dd><p>faster, with additional features, but not quite complete yet.
    Please try it first and use <span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/clx/mit-clx/"><code class="filename">clx/mit-clx</code></a></span> only
    if <span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/clx/new-clx/"><code class="filename">clx/new-clx</code></a></span> does not work for you.
    <span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/clx/new-clx/"><code class="filename">clx/new-clx</code></a></span> comes with several demos, please try them using
    </p><pre class="screen"><strong><code class="prompt">$</code></strong> clisp <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> <a href="modules.html#base-modules" class="olink"><span class="command"><strong>full</strong></span></a> <code class="option"><a href="clisp.html#opt-init" class="olink">-i</a></code> <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/clx/new-clx/demos/clx-demos.lisp"><code class="filename">modules/clx/new-clx/demos/clx-demos.lisp</code></a> <code class="option"><a href="clisp.html#opt-exec-expr" class="olink">-x</a></code> '(clx-demos:run-all-demos)'</pre><p>
     and follow the intructions.</p></dd></dl></div><p>This functionality is documented in the manual
  <a class="ulink" href="http://www.stud.uni-karlsruhe.de/~unk6/clxman/" target="_top">http://www.stud.uni-karlsruhe.de/~unk6/clxman/</a>, also
  available in the <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> source distribution as
  <a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/clx/clx-manual.tar.gz"><code class="filename">modules/clx/clx-manual.tar.gz</code></a>.
 </p></dd><dt><span class="term"><span class="module"><a class="filename" href="gtk.html" title="33.20. GTK Interface"><code class="filename">gtk2</code></a></span></span></dt><dd>Use <a class="ulink" href="http://www.gtk.org" target="_top">GTK+</a> and <a class="ulink" href="http://glade.gnome.org/" target="_top">Glade</a> to create GUI by
    <span class="author"><span class="firstname">James</span> <span class="surname">Bailey</span></span>.
 </dd></dl></div></div><div class="section" title="32.2.9.7. Bindings"><div class="titlepage"><div><div><h4 class="title"><a id="incmod-bind"></a>32.2.9.7. Bindings</h4></div></div></div><p>Call the operating system functions from <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a>.
  The following platforms are supported:</p><div class="variablelist"><dl><dt><span class="term"><span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/bindings/glibc/"><code class="filename">bindings/glibc</code></a></span></span></dt><dd><a class="ulink" href="http://www.linux.org/" target="_top"><span class="platform">Linux</span></a>/<a class="ulink" href="http://www.gnu.org" target="_top">GNU</a> <a class="ulink" href="http://www.gnu.org/software/libc/" target="_top">libc</a></dd><dt><span class="term"><span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/bindings/win32/"><code class="filename">bindings/win32</code></a></span></span></dt><dd><a class="ulink" href="http://winehq.org/" target="_top"><span class="platform">Win32</span></a></dd></dl></div></div><div class="section" title="32.2.9.8. Toys and Games"><div class="titlepage"><div><div><h4 class="title"><a id="incmod-toys"></a>32.2.9.8. Toys and Games</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/queens/"><code class="filename">queens</code></a></span></span></dt><dd>Compute the number of solutions to the <em class="replaceable"><code>n</code></em>-queens
    problem on a <em class="replaceable"><code>n</code></em>×<em class="replaceable"><code>n</code></em> chessboard (a toy
    example for the users to explore the <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> <a class="link" href="modules.html" title="32.2. External Modules">module</a> system).
 </dd><dt><span class="term"><a class="clisp-cvs" href="http://clisp.cvs.sourceforge.net/*checkout*/clisp/clisp/modules/clx/new-clx/demos/sokoban.lisp"><code class="filename">modules/clx/new-clx/demos/sokoban.lisp</code></a></span></dt><dd>a demo which comes with <span class="module"><a href="http://clisp.cvs.sourceforge.net/clisp/clisp/modules/clx/new-clx/"><code class="filename">clx/new-clx</code></a></span>.
</dd></dl></div></div></div></div><div class="bookinfo"><hr /><table width="100%" summary="impnotes meta info"><th><td align="left">These notes document <a class="ulink" href="http://clisp.cons.org" target="_top"><span class="command"><strong>CLISP</strong></span></a> version 2.48</td><td align="right">Last modified: 2009-07-28</td></th></table></div><div class="custom-footer"><hr /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="https://sourceforge.net/donate/index.php?group_id=1355"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" alt="[Support CLISP]" /></a></td><td align="right"><a href="https://sourceforge.net/projects/clisp"><img width="120" height="30" alt="[SourceForge]" src="http://sflogo.sourceforge.net/sflogo.php?group_id=1355&amp;type=12&amp;page=modules" /></a></td></tr></table></div><hr /><form method="get" action="http://www.google.com/custom" target="_top"><table width="100%" border="0"><tr><td nowrap="nowrap" align="center"><input type="hidden" name="domains" value="clisp.cons.org;clisp.podval.org;www.lisp.org" /><label for="sbi" style="display: none">Enter your search terms</label><input type="text" name="q" size="50" maxlength="255" id="sbi" value="32.2. External Modules" /><label for="sbb" style="display: none">Submit search form</label><input type="submit" name="sa" value="Google Search" id="sbb" /></td></tr><tr><td nowrap="nowrap" align="center"><input type="radio" name="sitesearch" value="" checked="1" id="ss0" /><label for="ss0" title="Search the Web"><small>Web</small></label><input type="radio" name="sitesearch" value="clisp.cons.org" id="ss1" /><label for="ss1" title="Search clisp.cons.org"><small>clisp.cons.org</small></label><input type="radio" name="sitesearch" value="clisp.podval.org" id="ss2" /><label for="ss2" title="Search clisp.podval.org"><small>clisp.podval.org</small></label><input type="radio" name="sitesearch" value="www.lisp.org" id="ss3" /><label for="ss3" title="Search www.lisp.org"><small>www.lisp.org</small></label><input type="hidden" name="client" value="pub-4445255502750357" /><input type="hidden" name="forid" value="1" /><input type="hidden" name="ie" value="UTF-8" /><input type="hidden" name="oe" value="UTF-8" /><input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:000000;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:48;LW:48;L:http://clisp.cons.org/clisp.png;S:http://clisp.cons.org;FORID:1" /><input type="hidden" name="hl" value="en" /></td></tr></table></form><hr /><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="screen.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ext-platform.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="dffi.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">32.1. Random Screen Access </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 32.3. The Foreign Function Call Facility</td></tr></table></div></body></html>
